{"ast":null,"code":"import { cartAction } from './uiSlice.js';\nimport { ModifyCart } from './CartSlice.js';\n\n// now we are going to create another thunk for fetching the data\nexport const fetchCartData = () => {\n  return async dispatch => {\n    const fetchData = async () => {\n      const response = await fetch('https://advance-redux-6e3fd-default-rtdb.firebaseio.com/cart.json');\n      if (!response.ok) {\n        throw new Error('Could not fetch Data..');\n      }\n      const data = await response.json();\n      return data;\n    };\n    try {\n      const cartData = await fetchData();\n      dispatch(ModifyCart.replaceCart(cartData));\n    } catch (error) {\n      dispatch(cartAction.showNotification({\n        status: 'error',\n        title: 'Error!...',\n        message: 'Fetching Cart Data Failed! ..'\n      }));\n    }\n  };\n};\n\n// here we re going to create our own action creators let's see how we can do that\n// for general reducer function redux automatically creates an action creator method for us which contains { type : '' , payload : ''}\n// but in our own action creators we have to create our own action creator methods like we are doing in here \n// but here we are not going to return a object as we know thunk returns a function ad that function that handle the action \n// this is our \" thunk \" just an action creator \nexport const sendCartData = cart => {\n  return async dispatch => {\n    dispatch(cartAction.showNotification({\n      status: 'pending',\n      title: 'sending...',\n      message: 'Sending Cart Data! ..'\n    }));\n    const sendRequest = async () => {\n      // cart.json is a firebase specific and it will create a new cart node in the database \n      const response = await fetch('https://advance-redux-6e3fd-default-rtdb.firebaseio.com/cart.json', {\n        method: 'PUT',\n        body: JSON.stringify({\n          items: cart.items,\n          totalQuantity: cart.totalQuantity\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Sending cart data is failed...');\n      }\n      ;\n    };\n    try {\n      await sendRequest();\n      dispatch(cartAction.showNotification({\n        status: 'success',\n        title: 'success!...',\n        message: 'Send Cart Data successfully! ..'\n      }));\n    } catch (error) {\n      dispatch(cartAction.showNotification({\n        status: 'error',\n        title: 'Error!...',\n        message: 'Sending Cart Data Failed! ..'\n      }));\n    }\n  };\n};","map":{"version":3,"names":["cartAction","ModifyCart","fetchCartData","dispatch","fetchData","response","fetch","ok","Error","data","json","cartData","replaceCart","error","showNotification","status","title","message","sendCartData","cart","sendRequest","method","body","JSON","stringify","items","totalQuantity"],"sources":["/home/ompatel/Desktop/REACT.JS/practice/22-advance-redux/src/components/store/cartAction.js"],"sourcesContent":["import { cartAction } from './uiSlice.js';\nimport { ModifyCart } from './CartSlice.js';\n\n// now we are going to create another thunk for fetching the data\nexport const fetchCartData = ()=>{\n    return async (dispatch)=>{\n        const fetchData = async ()=> {\n            const response = await fetch('https://advance-redux-6e3fd-default-rtdb.firebaseio.com/cart.json');\n\n            if(!response.ok){\n                throw new Error('Could not fetch Data..')\n            }\n\n            const data = await response.json();\n\n            return data\n        }\n        try {\n\n            const cartData = await fetchData()\n            dispatch(ModifyCart.replaceCart(cartData));\n\n        } catch (error) {\n            dispatch(cartAction.showNotification({\n                status : 'error',\n                title : 'Error!...',\n                message : 'Fetching Cart Data Failed! ..'\n            })) \n        }\n    }\n}\n\n// here we re going to create our own action creators let's see how we can do that\n// for general reducer function redux automatically creates an action creator method for us which contains { type : '' , payload : ''}\n// but in our own action creators we have to create our own action creator methods like we are doing in here \n// but here we are not going to return a object as we know thunk returns a function ad that function that handle the action \n// this is our \" thunk \" just an action creator \nexport const sendCartData = (cart) =>{\n    return async (dispatch)=>{\n        dispatch(cartAction.showNotification({\n            status : 'pending',\n            title : 'sending...',\n            message : 'Sending Cart Data! ..'\n        }))\n\n        const sendRequest = async () => {\n            // cart.json is a firebase specific and it will create a new cart node in the database \n            const response = await fetch('https://advance-redux-6e3fd-default-rtdb.firebaseio.com/cart.json' ,{\n                method : 'PUT',\n                body : JSON.stringify({\n                    items : cart.items , \n                    totalQuantity : cart.totalQuantity,\n                }), \n            })\n    \n            if(!response.ok){\n                throw new Error('Sending cart data is failed...');\n            };\n        }\n\n        try {\n            await sendRequest(); \n\n            dispatch(cartAction.showNotification({\n                status : 'success',\n                title : 'success!...',\n                message : 'Send Cart Data successfully! ..'\n            })) \n\n        } catch (error) {\n            dispatch(cartAction.showNotification({\n                status : 'error',\n                title : 'Error!...',\n                message : 'Sending Cart Data Failed! ..'\n            })) \n        }  \n    }\n}"],"mappings":"AAAA,SAASA,UAAU,QAAQ,cAAc;AACzC,SAASC,UAAU,QAAQ,gBAAgB;;AAE3C;AACA,OAAO,MAAMC,aAAa,GAAGA,CAAA,KAAI;EAC7B,OAAO,MAAOC,QAAQ,IAAG;IACrB,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAW;MACzB,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,mEAAmE,CAAC;MAEjG,IAAG,CAACD,QAAQ,CAACE,EAAE,EAAC;QACZ,MAAM,IAAIC,KAAK,CAAC,wBAAwB,CAAC;MAC7C;MAEA,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAElC,OAAOD,IAAI;IACf,CAAC;IACD,IAAI;MAEA,MAAME,QAAQ,GAAG,MAAMP,SAAS,CAAC,CAAC;MAClCD,QAAQ,CAACF,UAAU,CAACW,WAAW,CAACD,QAAQ,CAAC,CAAC;IAE9C,CAAC,CAAC,OAAOE,KAAK,EAAE;MACZV,QAAQ,CAACH,UAAU,CAACc,gBAAgB,CAAC;QACjCC,MAAM,EAAG,OAAO;QAChBC,KAAK,EAAG,WAAW;QACnBC,OAAO,EAAG;MACd,CAAC,CAAC,CAAC;IACP;EACJ,CAAC;AACL,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,YAAY,GAAIC,IAAI,IAAI;EACjC,OAAO,MAAOhB,QAAQ,IAAG;IACrBA,QAAQ,CAACH,UAAU,CAACc,gBAAgB,CAAC;MACjCC,MAAM,EAAG,SAAS;MAClBC,KAAK,EAAG,YAAY;MACpBC,OAAO,EAAG;IACd,CAAC,CAAC,CAAC;IAEH,MAAMG,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC5B;MACA,MAAMf,QAAQ,GAAG,MAAMC,KAAK,CAAC,mEAAmE,EAAE;QAC9Fe,MAAM,EAAG,KAAK;QACdC,IAAI,EAAGC,IAAI,CAACC,SAAS,CAAC;UAClBC,KAAK,EAAGN,IAAI,CAACM,KAAK;UAClBC,aAAa,EAAGP,IAAI,CAACO;QACzB,CAAC;MACL,CAAC,CAAC;MAEF,IAAG,CAACrB,QAAQ,CAACE,EAAE,EAAC;QACZ,MAAM,IAAIC,KAAK,CAAC,gCAAgC,CAAC;MACrD;MAAC;IACL,CAAC;IAED,IAAI;MACA,MAAMY,WAAW,CAAC,CAAC;MAEnBjB,QAAQ,CAACH,UAAU,CAACc,gBAAgB,CAAC;QACjCC,MAAM,EAAG,SAAS;QAClBC,KAAK,EAAG,aAAa;QACrBC,OAAO,EAAG;MACd,CAAC,CAAC,CAAC;IAEP,CAAC,CAAC,OAAOJ,KAAK,EAAE;MACZV,QAAQ,CAACH,UAAU,CAACc,gBAAgB,CAAC;QACjCC,MAAM,EAAG,OAAO;QAChBC,KAAK,EAAG,WAAW;QACnBC,OAAO,EAAG;MACd,CAAC,CAAC,CAAC;IACP;EACJ,CAAC;AACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}